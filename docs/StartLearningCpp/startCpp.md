---
comments: true
---

# 2.1 正式学习 C++

最早的计算机所需执行的任务便是由人们输入一些指令，并将运算所得的再输出出来，这里我们也将介绍一个最简单的可以执行输入并输出的 C++ 程序。程序代码2-1实现了用户输入什么内容，程序边输出什么内容。

程序代码2-1先使用 `std::cin` 输入，再使用 `std::cout` 输出。代码中包含了一些提供程序员或任何读到这段源码的读者所阅读的文字内容，这称作注释，这些注释都以 `//` 开头，在实际代码编译过程中，编译器会忽略它们。

``` C++ title="程序代码2-1"
#include <iostream>     // 引入 iostream 头文件

using namespace std;    // 使用标准命名空间 std

int main()              // 声明 main 函数
{                       // 函数体开始
    string strA;        // 声明 strA 变量
    cin >> strA;        // 从标准输入流读取后赋值给 strA 变量
    cout << strA;       // 向标准输出流写入 strA 变量的值

    return 0;           // 通常用于表示程序成功运行并正常结束。
}                       // 函数体结束
```

C++ 对大小写敏感，也就是说在开发过程中，需要严格区分大小写字符，比如将 `cin` 替换为 `CIN` 或 `Cin` 程序将无法通过编译(编译器提示：使用了未知的标识符)。同样编译器也是对拼写敏感的，因此如果你将 `cin` 替换为 `in` 或 `cing` 程序也将无法通过编译。这也意味着，你的程序中拼写与大小写必须与示例中相同。

C++ 中，通常将代码分为头文件、源文件和可能的其他文件(如实现文件)。头文件通常用 `.h` 或 `.hpp` 后缀；源文件通常用 `.cpp` 后缀；实现文件通常用 `.cxx` 或 `.cc` 后缀。这是一种我们建议的组织代码的方式。

!!! example ""

    如果你使用过 C 语言，在看到 cout 函数(而不是 `printf()` 函数)时可能会略显惊讶。事实上，C++ 完全可以使用原有 C 语言的所有功能，例如 `scanf()` 、 `printf()` ，你只需要包含常规 C 语言的 `stdio.h` 头文件即可。但本书讲解的是 C++ 语言，所以将使用 C++ 的特性和功能，他们在 C 版本的基础上进行了很多改进。从某些方面来讲，这将极大的提高你的开发效率。

使用函数来创建 C++ 程序。通常先将程序组织为主要任务，然后设计独立的函数来处理这些任务(通常在程序设计的部分我们要大体遵循一个原则：“高内聚，低耦合”)。

!!! tip "提示"

    **高内聚 (High Cohesion):** 意味着一个模块（类、函数等）应该关注于单一责任，执行一个明确定义的任务。高内聚的模块内部各部分应该彼此关联，共同服务于同一目标。高内聚的设计使得模块更容易理解、修改和维护。例如，一个处理用户输入的类应该专注于处理用户输入，而不涉及过多与其他模块无关的任务。如果一个模块承担了过多的任务，它的内聚性就较低。

    **低耦合 (Low Coupling):** 表示模块之间的相互依赖应该尽量减少。模块之间的关系应该是松散的，一个模块的修改不应该对其他模块造成过多的影响。低耦合的设计使得系统更容易维护、测试和重构。例如，如果一个模块修改了其内部实现，不应该导致其他模块的大规模修改。模块之间的接口应该清晰明了，避免不必要的依赖。

    综合来说，高内聚低耦合的设计原则旨在创建结构清晰、易于理解和可维护的代码，从而提高软件系统的质量和可扩展性。

程序代码2-1中的示例非常简单，只包含一个名为 `main()` 的函数。程序源代码参见 [GitHub 代码仓库 2-1.cpp](https://github.com/Evilrabbit520/Hello-CPP/blob/main/code/ChapterTwo/2-1.cpp)。2-1.cpp 中包含下述元素。

- 预处理指令 `#include`；
- 编译指令 `using namespace`；
- 函数头 `int main()`；
- 函数体 {和} 包含；
- 使用 C++ 的 `cin` 、`cout` 工具输入输出；
- 代表程序结束并结束 `main()` 函数的 `return` 语句；
- 注释语句，由前缀 `//` 进行标识。

下面将详细介绍这些语句。我们将优先介绍 `main()` 函数，当你了解 `main()` 的作用后，其他将更容易理解。

## 2.1.1 预处理指令和 iostream 文件

C++ 和 C 一样，也使用一种预处理器，该程序在进行主编译之前对源文件进行处理。不必执行任何特殊的操作来调用该预处理器，它会在编译程序时自动运行。这些指令以 `#` 符号开始，并在每条指令的后面没有分号。我们在程序代码2-1中就使用了一次预处理指令 `#include <iostream>` ，用于包含头文件，将 iostream 文件的内容插入到程序代码2-1中，原始文件没有被修改，而是将源代码文件和 iostream 组合成了复合文件。

!!! example ""

    这提出一个问题：为什么要将 iostream 文件的内容添加到程序中呢?

    C++ 中，iostream 中的前两个字母 io 指的是输入和输出(即I/O，Input/Output)。C++ 的输入/输出方案涉及到 iostream 文件中的多个定义。为了使用 cin 输入、cout 来输出消息，程序代码2-1需要这些定义才可以顺利完成任务。#include 编译指令相当于一个拷贝指令，可以将 isotream 与引用它的源代码一起被编译器编译。更通俗的来讲，iostream 文件的内容将取代程序中的代码行 `#include <iostream>` 。

    **注意：**使用 `cin`、`cout` 进行输入和输出的程序必须包含 iostream 文件。

## 2.1.2 头文件

像 iostream 这样的文件叫做包含文件，因为经常出现在源代码的头部也常被称为头文件。C++ 编译器自带了很多头文件，每个头文件都支持一组特定的工具。C 语言的传统是，头文件使用扩展名 .h ，将其作为一种通过名称标识文件类型的简单方式。例如，math.h 头文件支持各种 C 语言数学函数。最初，C++ 也是这样做的。例如，支持输入和输出的头文件叫做 iostream.h 。自 C++ 98 标准发布以后，C++ 的用法发生了变化。现在，对老式 C 的头文件保留了扩展名 .h ，C++ 仍可以使用这种文件，而标准 C++ 头文件则没有扩展名。有些 C 头文件被转换为 C++ 头文件，这些文件被重新命名，去掉了扩展名 .h ，并在文件名称前面加上前缀 c(表明来自 C 语言)。例如，C 版本的 math.h 改为 C++ 版本的 cmath 。有时 C 头文件的 C 版本和 C++ 版本相同，而有时候新版本做了一些修改。对于纯粹的 C++ 头文件(如 iostream )来说，去掉 h 不只是形式上的变化，没有 .h 的头文件也可以包含名称空间--2.1.3将向你说明。

## 2.1.3 名称空间

如果使用 iostream ，则应使用 `using namespace std;` 。

这叫 using 编译指令，你大可不必现在就明白为什么要用到它，你只需要明白，我们用了 iostream 中的标准输入 `cin` 和标准输出 `cout` 。如果你偏执的不使用它，也可以用 `std::cin` 和 `std::cout` 去代替它，但可能你也发现了，如果一个程序有几十次甚至几百次输入输出操作，你便要将 std:: 重复输入几十次甚至几百次。

你可能很疑惑，为了避免你一头雾水，我将在这里向你简单介绍。名称空间是 C++ 中一项较新的特性，它是为了使多个作者、厂商的源代码能够进行更简单的组合且不出现冲突和错误而设计的。例如：helloCpp 公司设计了一个叫做 `test()` 的函数，而 Microsoft(微软) 公司也早已有了一个叫做 `test()` 的函数，当其他用户在使用 `test()` 函数进行开发时，编译器将不知道你使用的是那一个版本。而名称空间可以让厂商对自己所开发的函数进行封装操作，例如：helloCpp 公司可以将其封装在 helloCpp 的名称空间中，Microsoft(微软) 公司可以将其封装在 Microsoft 的名称空间中。这样，`test()` 函数便成了两个独立的版本，编译器就可以使用名称空间来区分它们了。

``` C++
helloCpp::test("A warning appears!");

Microsoft::test("Correct execution.")
```

依据这个原理，`cin` 和 `cout` 被封装在标准模板库中，它们都被放置在名称空间 std 中。如之前所说，在初期学习过程中我们需要大量使用 std 中的标准组件，我们使用 using 编译指令可以大量减少重复使用 std:: 前缀的工作。这个 using 编译指令使得 std 名称空间中定义的所有名称都可用，这是一种偷懒手段。为了在更大的程序中不出现难以察觉的错误，建议的方法是只使用所需的名称即可，这也可以通过 using 声明实现：

``` C++
using std::cin;
using std::cout;
```

## 2.1.4 `main()` 函数

将 `main()` 单独提出后，程序代码2-1的示例基本结构如下：

``` C++
int main()
{
    //功能语句
    return 0;
}
```
!!! warning "请注意！"

    在 C++ 中，程序的执行通常从 `main()` 函数开始。`main()` 函数是程序的入口点，操作系统在运行程序时会从 `main()` 函数开始执行。因此，你需要记住，你的程序应该有且只有一个 `main()` 函数。如果你尝试不使用 `main()` 函数，编译器可能会报错或者警告，因为这种操作违反了 C++ 的执行模型。

这些语句表明有一个名为 `main()` 的函数，函数头为 `int main()`，函数体为花括号({和})中的内容。函数头和函数体的所有内容共同描述了该函数的功能。函数头是声明类型并且大概表明实现了什么功能，在后期我们学习到函数的参数后，它便有了与程序其他部分之间进行数据交换和接口的作用。函数体主要是指出该函数应该实现什么指令和功能。在 C++ 中，每条完整的指令都称为语句，所有的语句都是以分号结束，若忘记输入分号，编译器会认为该语句没有结束。所以，请在代码编写完毕后认真检查代码的完整性。

!!! tip "提示"
    
    在 C++ 中，所有的函数都是由**名称+圆括号**组成的，例如：`sin()`、`cos()`、`tan()` 等。你也可以自己定义并命名一个函数，如：`test()`、`abc()`、`LearnCpp()` 等。

`main()` 函数中最后一条语句叫做返回语句，它返回一个 0 ，表明程序正常结束并退出程序。在其他非 `main()` 的函数中，`return` 表明返回这个函数运算后的内容(结果)。后续还会详细介绍。

## 2.1.5 注释

<!---->