---
comments: true
---

# 3.3 浮点类型

了解了 C++ 的整形后，我们再来看看浮点类型，它们是 C++ 语言第二梯队的基本类型。**所谓浮点类型就是指能够存储带小数部分的数据的数据类型。**这听起来像绕口令，我们举个简单的例子。圆的面积公式是： $S = \pi r^2$，如果 $r = 2.25$ 这里的 $2.25$ 就是一个带有小数部分的数，就需要用浮点类型来存储。

“浮点型” 这个名称来源于它在计算机内部存储数据的方式。在这种表示方法中，一个浮点数由两部分组成：尾数（也称为有效数字）和指数。尾数是一个固定精度的数字，指数则用于表示小数点的位置，通过改变指数的值，可以让小数点 “浮动”，所以称为 “浮点型”。例如：对于科学计数法表示的数字 $2.34 \times 10^4$，其中 $2.34$ 是尾数，$4$ 是指数。在计算机中存储的浮点数类似这种形式，但计算机采用二进制编码。

我们之所以要学习使用浮点型，是因为整形无法或者说很难有效地表示一些“超常”的数值范围。例如，我们无法用整形表示太阳到地球的距离（约等于 $1.496 \times 10^{11}$ 米），或是一些极小的数值。且在诸多领域中很多时候我们都需要用到带有小数部分的数值。

浮点数在计算机中的表示方法与整数有天壤之别，幸运的是我们不必再去过多探究内部实现的细节。我们只需掌握如何使用浮点类型即可。

!!! Warning "浮点型精度说明"

    浮点数的存储方式和有限的位数，可能会导致一些**精度问题**，比如舍入误差等。在一些连续的计算或者比较运算中，可能会出现意料之外的结果。请务必不要将其用作货币结算或金融相关系统中！应使定点数类型或高精度库。

## 3.3.1 浮点数表示方法

C++ 有两种浮点数表示方式。

1. 第一种是常用的小数点表示法

``` text
1.0
1.23
12.34
0.0001
27199.10102
```

当我们使用浮点类型来保存值时，小数点后即使是 0 小数点也将确保该数字以浮点格式表示即 1.0 而不是 1。

2. 第二种是科学计数表示法

``` text
1.23E5
-15.3E9
8.33E5
-8.11e-10
9.54E-8
4.02E+7
```
在科学计数法中，“E”（或 “e”）表示**乘以 10 的幂次方**。

对于 “1.23E5”，其中 “E5” 表示 10 的 5 次方，即 100000，那么就是 $1.23 \times 10^5$ 或 $1.23 \times 100000$ 了。

## 3.3.2 浮点数的类型

!!! Note "有效数字（有效数位）"
    
    有效数字是指在一个数中，从该数的第一个非零数字起，直到末尾数字止的数字。这些数字能够真实地反映一个数的精度，用于衡量数据表示的准确性。

在 C++ 中同样也有 `float`、`double` 和 `long double` 三种浮点类型。这些类型数按照它们可以表示的有效数字和允许的指数最小范围来描述的。例如：对于数字 0.0034，它的有效数位是两位（3 和 4），前面的零是用于确定小数点位置的，不是有效数字；而 3.40 这个数字的有效数位是三位（3、4 和最后的 0），最后的 0 表示这个数字精确到了百分位。

对于浮点型数据，有效数位是衡量其精度的重要指标。如单精度浮点数（`float`）大约有 6-7 位有效数字，双精度浮点数（`double`）大约有 15-16 位有效数字。例如:一个 `float` 类型的数值表示为 3.141592（实际上由于 `float` 精度限制，这可能已经存在舍入误差），其有效数位约为 6 位；而对于一个 `double` 类型表示为 3.141592653589793，有效数位约为 15 位。

事实上，C 和 C++ 对于有效位数的要求是 `float` 至少 32 位，`double` 至少 48 位，且不少于 `float`，而 `long double` 至少要和 `double` 一样多。这三种数据类型的有效位数可以一样多，不过通常，`float`为 32 位，`double`为 64 位，`long double`为 80、96 或 128 位。而它们的指数范围则至少是 -37～37。

!!! Info "存储位与有效数字的区别"

    - 存储位：

    存储位是指在计算机存储设备（如内存、硬盘等）或数据存储格式中，用于存放数据的最小单元。它主要是从数据存储的物理或逻辑空间角度来考虑的。例如：一个有符号的 8 位整数（存储位为 8 个），可以表示的范围是 -128～127，它通过这些存储位的二进制组合来实现数据的存储。

    - 有效数字：

    有效数字是指在一个数中，从该数的第一个非零数字起，直到末尾数字止的数字。它主要用于表示测量或计算结果的精度。